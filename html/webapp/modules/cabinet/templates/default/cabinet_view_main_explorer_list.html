<{strip}>
<{assign var="cabinet_template_name" value="default"}>

<table class="cabinet_right" cellspacing="0" cellpadding="0" summary="">
	<{if ($action.folder_id != "0" && $action.offset == 0)}>
		<tr>
			<td class="cabinet_<{$cabinet_template_name}>_grid_row">
				<div class="cabinet_file_name cabinet_<{$cabinet_template_name}>_file_name">
					<{include file="cabinet_view_main_filename.html" file_id=$action.folder_parent_id file_name=$lang.cabinet_up_folder|smarty:nodefaults explorer_pos="up_folder"}>
				</div>
			</td>
			<{if ($action.cabinet.disp_size == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_file_size cabinet_<{$cabinet_template_name}>_file_size">
						&nbsp;
					</div>
				</td>
			<{/if}>
			<{if ($action.cabinet.disp_insert_user == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_file_ins_user cabinet_<{$cabinet_template_name}>_file_ins_user">
						&nbsp;
					</div>
				</td>
			<{/if}>
			<{if ($action.cabinet.disp_insert_date == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_file_ins_date cabinet_<{$cabinet_template_name}>_file_ins_date">
						&nbsp;
					</div>
				</td>
			<{/if}>
			<{if ($action.cabinet.disp_update_user == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_file_upd_user cabinet_<{$cabinet_template_name}>_file_upd_user">
						&nbsp;
					</div>
				</td>
			<{/if}>
			<{if ($action.cabinet.disp_update_date == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_file_upd_date cabinet_<{$cabinet_template_name}>_file_upd_date">
						&nbsp;
					</div>
				</td>
			<{/if}>
			<{if ($action.cabinet.disp_comment == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_file_comment cabinet_<{$cabinet_template_name}>_file_comment">
						&nbsp;
					</div>
				</td>
			<{/if}>
			<td class="cabinet_<{$cabinet_template_name}>_grid_row">
				<div class="cabinet_context cabinet_<{$cabinet_template_name}>_context">
						&nbsp;
				</div>
			</td>
			<{if ($action.cabinet.disp_download_num == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_count cabinet_<{$cabinet_template_name}>_count">
						&nbsp;
					</div>
				</td>
			<{/if}>
		</tr>
	<{/if}>

	<{section loop=$action.file_list name=i}>
		<{assign var="file" value=$action.file_list[i]}>
		<tr>
			<td class="cabinet_<{$cabinet_template_name}>_grid_row">
				<div class="cabinet_file_name cabinet_<{$cabinet_template_name}>_file_name">
					<{include file="cabinet_view_main_filename.html" explorer_pos="right"}>
				</div>
			</td>
			<{if ($action.cabinet.disp_size == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_file_size cabinet_<{$cabinet_template_name}>_file_size">
						<{if ($action.file_list[i].file_type != CABINET_FILETYPE_FOLDER) }>
							<{$action.file_list[i].prefix_size}>
						<{/if}>
						&nbsp;&nbsp;
					</div>
				</td>
			<{/if}>
			<{if ($action.cabinet.disp_insert_user == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_file_ins_user cabinet_<{$cabinet_template_name}>_file_ins_user">
						<{include file = "cabinet_view_handle.html" handle=$action.file_list[i].insert_user_name|smarty:nodefaults user_id=$action.file_list[i].insert_user_id}>
					</div>
				</td>
			<{/if}>
			<{if ($action.cabinet.disp_insert_date == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_file_ins_date cabinet_<{$cabinet_template_name}>_file_ins_date">
						<{$action.file_list[i].insert_time|timezone_date_format:$lang.cabinet_date_format|smarty:nodefaults}>
					</div>
				</td>
			<{/if}>
			<{if ($action.cabinet.disp_update_user == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_file_upd_user cabinet_<{$cabinet_template_name}>_file_upd_user">
						<{include file = "cabinet_view_handle.html" handle=$action.file_list[i].update_user_name|smarty:nodefaults user_id=$action.file_list[i].update_user_id}>
					</div>
				</td>
			<{/if}>
			<{if ($action.cabinet.disp_update_date == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_file_upd_date cabinet_<{$cabinet_template_name}>_file_upd_date">
						<{$action.file_list[i].update_time|timezone_date_format:$lang.cabinet_date_format|smarty:nodefaults}>
					</div>
				</td>
			<{/if}>
			<{if ($action.cabinet.disp_comment == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_file_comment cabinet_<{$cabinet_template_name}>_file_comment">
						<{$action.file_list[i].comment}>
					</div>
				</td>
			<{/if}>
			<td class="cabinet_<{$cabinet_template_name}>_grid_row">
				<div class="cabinet_context cabinet_<{$cabinet_template_name}>_context">
					<a href="#" onclick="cabinetCls['<{$id}>'].showContext(this,<{$action.file_list[i].file_id}>); return false;">
						<img src="<{"menu.gif"|get_modules_image}>" alt="<{$lang.cabinet_context_menu|smarty:nodefaults}>" title="<{$lang.cabinet_title_context_menu|smarty:nodefaults}>" />
					</a>
				</div>
			</td>
			<{if ($action.cabinet.disp_download_num == _ON) }>
				<td class="cabinet_<{$cabinet_template_name}>_grid_row">
					<div class="cabinet_count cabinet_<{$cabinet_template_name}>_count">
						<{if ($action.file_list[i].file_type == CABINET_FILETYPE_FOLDER) }>
							&nbsp;&nbsp;
						<{else}>
							<div id="cabinet_count<{$action.file_list[i].file_id}><{$id}>">
								<{$lang.cabinet_count_str|smarty:nodefaults|sprintf:$action.file_list[i].download_num}>
							</div>
						<{/if}>
					</div>
				</td>
			<{/if}>
		</tr>
	<{/section}>
</table>

<script class="nc_script" type="text/javascript">
	cabinetCls["<{$id}>"].setDragAndDrop("cabinet_explore_right<{$id}>");
</script>

<{/strip}>